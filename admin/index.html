<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="shortcut icon" href="img/logo.png" type="image/x-icon">
    <title>ููุญุฉ ุงูุชุญูู - ูุธุงู ุงูุญุถูุฑ</title>
    <link rel="stylesheet" href="css/admin.css" />
    <style>
      body {
        font-family: "Segoe UI", "Cairo", "Tahoma", Arial, sans-serif;
      }
      .rtl-support {
        direction: rtl;
        text-align: right;
      }
    </style>
  </head>
  <body>
    <!-- Header -->
    <header class="header">
      <div class="container">
        <h1>โชููุญุฉ ุชุญูู ุจุฑูุงูุฌ ุงุณุฑุฉ ุงููุฏูุณ ุงุบุณุทูููุณ</h1>
        <div class="user-info">
          <span id="adminName">ูุฏูุฑ ุงููุธุงู</span>
          <button class="btn btn-danger btn-sm" onclick="logout()">
            ุชุณุฌูู ุงูุฎุฑูุฌ
          </button>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <div class="container">
      <!-- Navigation Tabs -->
      <div class="nav-tabs">
        <div class="nav-tab active" onclick="switchTab('dashboard')">
          ููุญุฉ ุงููุนูููุงุช
        </div>
        <div class="nav-tab" onclick="switchTab('users')">ุงููุณุชุฎุฏููู</div>
        <div class="nav-tab" onclick="switchTab('events')">ุงููุนุงููุงุช</div>
        <div class="nav-tab" onclick="switchTab('barcodes')">
          ุงูุจุงุฑููุฏุงุช ุงููุดุชุฑูุฉ
        </div>
        <div class="nav-tab" onclick="switchTab('attendance')">ุณุฌู ุงูุญุถูุฑ</div>
        <div class="nav-tab" onclick="switchTab('announcements')">
          ุงูุฅุนูุงูุงุช
        </div>
        <div class="nav-tab" onclick="switchTab('reflections')">
          ุงูุชุฃููุงุช ุงูุฑูุญูุฉ
        </div>
        <div class="nav-tab" onclick="switchTab('categories')">
          ุชุตูููุงุช ุงูุชุฃููุงุช
        </div>
        <div class="nav-tab" onclick="switchTab('notifications')">
          ุงูุฅุดุนุงุฑุงุช
        </div>
      </div>

      <!-- Alert Container -->
      <div id="alertContainer"></div>

      <!-- Dashboard Tab -->
      <div id="dashboardTab" class="tab-content">
        <h2 class="mb-20">ูุธุฑุฉ ุนุงูุฉ ุนูู ููุญุฉ ุงููุนูููุงุช</h2>

        <!-- Statistics Grid -->
        <div class="stats-grid" id="statsGrid">
          <div class="stat-card">
            <div class="stat-icon" style="background-color: #8b0000">๐ฅ</div>
            <div class="stat-info">
              <h3 id="totalUsers">0</h3>
              <p>ุฅุฌูุงูู ุงููุณุชุฎุฏููู</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon" style="background-color: #d4af37">๐</div>
            <div class="stat-info">
              <h3 id="totalEvents">0</h3>
              <p>ุฅุฌูุงูู ุงููุนุงููุงุช</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon" style="background-color: #4caf50">โ</div>
            <div class="stat-info">
              <h3 id="totalAttendance">0</h3>
              <p>ุฅุฌูุงูู ุงูุญุถูุฑ</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon" style="background-color: #800020">๐ข</div>
            <div class="stat-info">
              <h3 id="totalAnnouncements">0</h3>
              <p>ุงูุฅุนูุงูุงุช</p>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header">
            <h3 class="card-title">ุงููุดุงุท ุงูุฃุฎูุฑ</h3>
          </div>
          <div id="recentActivity">
            <p class="text-center">ุฌุงุฑู ุชุญููู ุงููุดุงุท ุงูุฃุฎูุฑ...</p>
          </div>
        </div>
      </div>

      <!-- Users Tab -->
      <div id="usersTab" class="tab-content d-none">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</h3>
            <button class="btn btn-primary" onclick="showAddUserModal()">
              + ุฅุถุงูุฉ ูุณุชุฎุฏู
            </button>
          </div>
          <div id="usersTableContainer">
            <div class="loading">
              <div class="spinner"></div>
              <p>ุฌุงุฑู ุชุญููู ุงููุณุชุฎุฏููู...</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Events Tab -->
      <div id="eventsTab" class="tab-content d-none">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">ุฅุฏุงุฑุฉ ุงููุนุงููุงุช</h3>
            <button class="btn btn-primary" onclick="showAddEventModal()">
              + ุฅุถุงูุฉ ูุนุงููุฉ
            </button>
          </div>
          <div id="eventsTableContainer">
            <div class="loading">
              <div class="spinner"></div>
              <p>ุฌุงุฑู ุชุญููู ุงููุนุงููุงุช...</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Shared Barcodes Tab -->
      <div id="barcodesTab" class="tab-content d-none">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">ุงูุจุงุฑููุฏุงุช ุงููุดุชุฑูุฉ ูููุนุงููุงุช</h3>
            <button class="btn btn-info" onclick="loadSharedBarcodes()">
              ๐ ุชุญุฏูุซ
            </button>
          </div>
          <div id="barcodesContainer">
            <div class="loading">
              <div class="spinner"></div>
              <p>ุฌุงุฑู ุชุญููู ุงูุจุงุฑููุฏุงุช ุงููุดุชุฑูุฉ...</p>
            </div>
          </div>
        </div>

        <div class="card" style="margin-top: 20px">
          <div class="card-header">
            <h3 class="card-title">๐ฑ ููููุฉ ุงุณุชุฎุฏุงู ุงูุจุงุฑููุฏุงุช ุงููุดุชุฑูุฉ</h3>
          </div>
          <div style="padding: 20px">
            <div
              style="
                background: #f8f9fa;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 15px;
              "
            >
              <h4 style="color: #8b0000; margin-top: 0">โจ ุงููุธุงู ุงูุฌุฏูุฏ</h4>
              <p>
                โ ูู ููุน ูุนุงููุฉ ูู ุจุงุฑููุฏ ูุงุญุฏ ุซุงุจุช (ุงููุฏุงุณุ ุงูุชุณุจุญุฉุ ุงูุงุฌุชูุงุนุ
                ุงููุดุงุท)
              </p>
              <p>โ ุนูุฏ ุงููุณุญุ ูุชู ุชุณุฌูู ุงูุญุถูุฑ ุจุงูุชุงุฑูุฎ ูุงูููุช ุงููุนูู</p>
              <p>โ ุฅุฐุง ูู ุชูุฌุฏ ูุนุงููุฉ ูููููุ ูุชู ุฅูุดุงุคูุง ุชููุงุฆูุงู</p>
              <p>โ ูุง ุญุงุฌุฉ ูุฅูุดุงุก ูุนุงููุฉ ุฌุฏูุฏุฉ ูู ูุฑุฉ</p>
            </div>

            <div
              style="
                background: #fff3cd;
                padding: 15px;
                border-radius: 8px;
                border-left: 4px solid #ffc107;
              "
            >
              <h4 style="color: #856404; margin-top: 0">๐ ูุซุงู ุนููู</h4>
              <ol style="line-height: 2">
                <li>
                  <strong>ููู ุงูุฃุญุฏ 8:00 ุต</strong> - ุดุฎุต ููุณุญ ุจุงุฑููุฏ "ุงููุฏุงุณ" โ
                  ูุชู ุชุณุฌูู ุญุถูุฑู ุงูุณุงุนุฉ 8:00
                </li>
                <li>
                  <strong>ููู ุงูุฃุญุฏ 9:30 ุต</strong> - ุดุฎุต ุขุฎุฑ ููุณุญ ููุณ ุจุงุฑููุฏ
                  "ุงููุฏุงุณ" โ ูุชู ุชุณุฌูู ุญุถูุฑู ุงูุณุงุนุฉ 9:30
                </li>
                <li>
                  <strong>ุงูุฃุญุฏ ุงููุงุฏู</strong> - ูุณุชุฎุฏููู ููุณ ุงูุจุงุฑููุฏุ ููุชู
                  ุชุณุฌูู ูุนุงููุฉ ุฌุฏูุฏุฉ ูููู ุฌุฏูุฏ
                </li>
              </ol>
            </div>
          </div>
        </div>
      </div>

      <!-- Attendance Tab -->
      <div id="attendanceTab" class="tab-content d-none">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">ุณุฌูุงุช ุงูุญุถูุฑ</h3>
            <button class="btn btn-success" onclick="exportAttendance()">
              ๐ฅ ุชุตุฏูุฑ
            </button>
          </div>
          <div id="attendanceTableContainer">
            <div class="loading">
              <div class="spinner"></div>
              <p>ุฌุงุฑู ุชุญููู ุณุฌูุงุช ุงูุญุถูุฑ...</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Announcements Tab -->
      <div id="announcementsTab" class="tab-content d-none">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">ุฅุฏุงุฑุฉ ุงูุฅุนูุงูุงุช</h3>
            <button
              class="btn btn-primary"
              onclick="showAddAnnouncementModal()"
            >
              + ุฅุถุงูุฉ ุฅุนูุงู
            </button>
          </div>
          <div id="announcementsTableContainer">
            <div class="loading">
              <div class="spinner"></div>
              <p>ุฌุงุฑู ุชุญููู ุงูุฅุนูุงูุงุช...</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Reflections Tab -->
      <div id="reflectionsTab" class="tab-content d-none">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">ุฅุฏุงุฑุฉ ุงูุชุฃููุงุช ุงูุฑูุญูุฉ</h3>
            <button class="btn btn-primary" onclick="showAddReflectionModal()">
              + ุฅุถุงูุฉ ุชุฃูู
            </button>
          </div>
          <div id="reflectionsTableContainer">
            <div class="loading">
              <div class="spinner"></div>
              <p>ุฌุงุฑู ุชุญููู ุงูุชุฃููุงุช...</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Categories Tab -->
      <div id="categoriesTab" class="tab-content d-none">
        <div class="card">
          <div class="card-header">
            <h3 class="card-title">๐ท๏ธ ุฅุฏุงุฑุฉ ุชุตูููุงุช ุงูุชุฃููุงุช</h3>
            <button class="btn btn-primary" onclick="showAddCategoryModal()">
              + ุฅุถุงูุฉ ุชุตููู
            </button>
          </div>
          <div id="categoriesTableContainer">
            <div class="loading">
              <div class="spinner"></div>
              <p>ุฌุงุฑู ุชุญููู ุงูุชุตูููุงุช...</p>
            </div>
          </div>
        </div>

        <div class="card" style="margin-top: 20px">
          <div class="card-header">
            <h3 class="card-title">โน๏ธ ูุนูููุงุช ุนู ุงูุชุตูููุงุช</h3>
          </div>
          <div style="padding: 20px">
            <div
              style="
                background: #f8f9fa;
                padding: 15px;
                border-radius: 8px;
                margin-bottom: 15px;
              "
            >
              <h4 style="color: #8b0000; margin-top: 0">
                ๐ ููููุฉ ุงุณุชุฎุฏุงู ุงูุชุตูููุงุช
              </h4>
              <ul style="line-height: 2">
                <li>ููููู ุฅุถุงูุฉ ุชุตูููุงุช ุฌุฏูุฏุฉ ุญุณุจ ุงุญุชูุงุฌุงุช ุงููููุณุฉ</li>
                <li>ูู ุชุตููู ูู ุงุณู ุจุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ</li>
                <li>ููููู ุชุฎุตูุต ุฃููููุฉ ูููู ููู ุชุตููู</li>
                <li>ุชุฑุชูุจ ุงูุนุฑุถ ูุญุฏุฏ ููู ุชุธูุฑ ุงูุชุตูููุงุช ูู ุงูุชุทุจูู</li>
                <li>ููููู ุชุนุทูู ุงูุชุตูููุงุช ุฏูู ุญุฐููุง</li>
              </ul>
            </div>
            <div
              style="
                background: #fff3cd;
                padding: 15px;
                border-radius: 8px;
                border-left: 4px solid #ffc107;
              "
            >
              <h4 style="color: #856404; margin-top: 0">โ๏ธ ููุงุญุธุงุช ูุงูุฉ</h4>
              <ul style="line-height: 2">
                <li>ูุง ูููู ุญุฐู ุชุตููู ูุญุชูู ุนูู ุชุฃููุงุช</li>
                <li>ูุฌุจ ููู ุงูุชุฃููุงุช ุฅูู ุชุตููู ุขุฎุฑ ูุจู ุงูุญุฐู</li>
                <li>ุงูุฃููููุงุช ุงููุณุชุฎุฏูุฉ ูู emoji</li>
                <li>ุงูุฃููุงู ุจุตูุบุฉ hex (#RRGGBB)</li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Add User Modal -->
    <div id="userModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ</h2>
          <span class="close-modal" onclick="closeModal('userModal')"
            >&times;</span
          >
        </div>
        <form id="userForm" onsubmit="saveUser(event)">
          <div class="form-group">
            <label>ุงูุงุณู ุงููุงูู *</label>
            <input type="text" class="form-control" name="name" required />
          </div>
          <div class="form-group">
            <label>ุงูุจุฑูุฏ ุงูุฅููุชุฑููู *</label>
            <input type="email" class="form-control" name="email" required />
          </div>
          <div class="form-group">
            <label>ุฑูู ุงููุงุชู *</label>
            <input
              type="tel"
              class="form-control"
              name="phone"
              pattern="^01[0-9]{9}$"
              maxlength="11"
              placeholder="01xxxxxxxxx"
              required
            />
          </div>
          <div class="form-group" id="passwordField">
            <label>ูููุฉ ุงููุฑูุฑ *</label>
            <input
              type="password"
              class="form-control"
              name="password"
              minlength="6"
            />
          </div>
          <div class="form-group">
            <label>ุงูุฏูุฑ ุงููุธููู *</label>
            <select class="form-control" name="role" required>
              <option value="member">ุนุถู</option>
              <option value="servant">ุฎุงุฏู</option>
              <option value="admin">ูุณุคูู</option>
            </select>
          </div>
          <div class="form-group">
            <label>
              <input type="checkbox" name="is_active" value="1" checked />
              ูุณุชุฎุฏู ูุดุท
            </label>
          </div>
          <div class="d-flex gap-10">
            <button type="submit" class="btn btn-primary">ุญูุธ ุงููุณุชุฎุฏู</button>
            <button
              type="button"
              class="btn btn-danger"
              onclick="closeModal('userModal')"
            >
              ุฅูุบุงุก
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Add Event Modal -->
    <div id="eventModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>ุฅุถุงูุฉ ูุนุงููุฉ ุฌุฏูุฏุฉ</h2>
          <span class="close-modal" onclick="closeModal('eventModal')"
            >&times;</span
          >
        </div>
        <form id="eventForm" onsubmit="saveEvent(event)">
          <div class="form-group">
            <label>ุงุณู ุงููุนุงููุฉ *</label>
            <input type="text" class="form-control" name="name" required />
          </div>
          <div class="form-group">
            <label>ููุน ุงููุนุงููุฉ *</label>
            <select class="form-control" name="type" required>
              <option value="mass">ุงููุฏุงุณ ุงูุฅููู</option>
              <option value="tasbeha">ุงูุชุณุจุญุฉ</option>
              <option value="meeting">ุงุฌุชูุงุน</option>
              <option value="activity">ูุดุงุท</option>
            </select>
          </div>
          <div class="form-group">
            <label>ุงูุชุงุฑูุฎ ูุงูููุช *</label>
            <input
              type="datetime-local"
              class="form-control"
              name="date"
              required
            />
          </div>
          <div class="form-group">
            <label>ุฑูุฒ ุงูุญุถูุฑ (Barcode/QR) *</label>
            <input type="text" class="form-control" name="barcode" required />
          </div>
          <div class="form-group">
            <label>ุงููุตู</label>
            <textarea class="form-control" name="description"></textarea>
          </div>
          <div class="form-group">
            <label>ุงููููุน</label>
            <input type="text" class="form-control" name="location" />
          </div>
          <div class="d-flex gap-10">
            <button type="submit" class="btn btn-primary">ุญูุธ ุงููุนุงููุฉ</button>
            <button
              type="button"
              class="btn btn-danger"
              onclick="closeModal('eventModal')"
            >
              ุฅูุบุงุก
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Add Announcement Modal -->
    <div id="announcementModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>ุฅุถุงูุฉ ุฅุนูุงู ุฌุฏูุฏ</h2>
          <span class="close-modal" onclick="closeModal('announcementModal')"
            >&times;</span
          >
        </div>
        <form id="announcementForm" onsubmit="saveAnnouncement(event)">
          <div class="form-group">
            <label>ุงูุนููุงู *</label>
            <input
              type="text"
              class="form-control"
              name="title"
              required
              maxlength="100"
            />
          </div>
          <div class="form-group">
            <label>ุงููุญุชูู *</label>
            <textarea
              class="form-control"
              name="content"
              required
              maxlength="500"
            ></textarea>
          </div>
          <div class="form-group">
            <label>
              <input type="checkbox" name="is_pinned" value="1" />
              ุชุซุจูุช ูุฐุง ุงูุฅุนูุงู
            </label>
          </div>
          <div class="d-flex gap-10">
            <button type="submit" class="btn btn-primary">ุญูุธ ุงูุฅุนูุงู</button>
            <button
              type="button"
              class="btn btn-danger"
              onclick="closeModal('announcementModal')"
            >
              ุฅูุบุงุก
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Add Reflection Modal -->
    <div id="reflectionModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2>ุฅุถุงูุฉ ุชุฃูู ุฑูุญู ุฌุฏูุฏ</h2>
          <span class="close-modal" onclick="closeModal('reflectionModal')"
            >&times;</span
          >
        </div>
        <form id="reflectionForm" onsubmit="saveReflection(event)">
          <div class="form-group">
            <label>ุงูุนููุงู *</label>
            <input
              type="text"
              class="form-control"
              name="title"
              required
              maxlength="100"
            />
          </div>
          <div class="form-group">
            <label>ุงููุญุชูู *</label>
            <textarea class="form-control" name="content" required></textarea>
          </div>
          <div class="form-group">
            <label>ุงูุชุตููู *</label>
            <select
              class="form-control"
              name="category"
              id="reflectionCategorySelect"
              required
            >
              <option value="">ุฌุงุฑู ุงูุชุญููู...</option>
            </select>
          </div>
          <div class="form-group">
            <label>ุฑุงุจุท ุงูุตูุฑุฉ</label>
            <input
              type="url"
              class="form-control"
              name="image_url"
              placeholder="https://example.com/image.jpg"
              onchange="previewReflectionImage()"
            />
            <img
              id="imagePreview"
              style="
                display: none;
                margin-top: 10px;
                max-width: 100%;
                max-height: 200px;
                border-radius: 8px;
              "
              alt="ูุนุงููุฉ ุงูุตูุฑุฉ"
            />
          </div>
          <div class="d-flex gap-10">
            <button type="submit" class="btn btn-primary">ุญูุธ ุงูุชุฃูู</button>
            <button
              type="button"
              class="btn btn-danger"
              onclick="closeModal('reflectionModal')"
            >
              ุฅูุบุงุก
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Add/Edit Category Modal -->
    <div id="categoryModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 id="categoryModalTitle">ุฅุถุงูุฉ ุชุตููู ุฌุฏูุฏ</h2>
          <span class="close-modal" onclick="closeModal('categoryModal')"
            >&times;</span
          >
        </div>
        <form id="categoryForm" onsubmit="saveCategory(event)">
          <input type="hidden" name="id" value="" />
          <div class="form-group">
            <label>ุงูุงุณู ุจุงูุนุฑุจูุฉ *</label>
            <input
              type="text"
              class="form-control"
              name="name_ar"
              required
              maxlength="100"
              placeholder="ูุซุงู: ุงูุตูุงุฉ"
            />
          </div>
          <div class="form-group">
            <label>ุงูุงุณู ุจุงูุฅูุฌููุฒูุฉ *</label>
            <input
              type="text"
              class="form-control"
              name="name_en"
              required
              maxlength="100"
              placeholder="ูุซุงู: Prayer"
            />
          </div>
          <div class="form-group">
            <label>ุงููุตู</label>
            <textarea
              class="form-control"
              name="description"
              rows="3"
              placeholder="ูุตู ุงูุชุตููู (ุงุฎุชูุงุฑู)"
            ></textarea>
          </div>
          <div class="form-group">
            <label>ุงูุฃููููุฉ (Emoji) *</label>
            <input
              type="text"
              class="form-control"
              name="icon"
              required
              maxlength="10"
              placeholder="ูุซุงู: ๐ ุฃู ๐"
              style="font-size: 24px"
            />
            <small style="color: #666">
              ููููู ูุณุฎ emoji ูู
              <a href="https://emojipedia.org" target="_blank">Emojipedia</a>
            </small>
          </div>
          <div class="form-group">
            <label>ุงูููู *</label>
            <div style="display: flex; gap: 10px; align-items: center">
              <input
                type="color"
                class="form-control"
                name="color"
                required
                value="#8B0000"
                style="width: 80px; height: 40px; padding: 5px"
              />
              <input
                type="text"
                class="form-control"
                id="colorHex"
                value="#8B0000"
                pattern="^#[0-9A-Fa-f]{6}$"
                maxlength="7"
                placeholder="#8B0000"
                onchange="document.querySelector('[name=color]').value = this.value"
                style="width: 120px"
              />
              <span id="colorPreview" style="font-size: 18px">โฌค</span>
            </div>
          </div>
          <div class="form-group">
            <label>ุชุฑุชูุจ ุงูุนุฑุถ *</label>
            <input
              type="number"
              class="form-control"
              name="display_order"
              required
              min="0"
              value="0"
              placeholder="0"
            />
            <small style="color: #666"> ุฑูู ุฃุตุบุฑ = ูุธูุฑ ุฃููุงู </small>
          </div>
          <div class="form-group">
            <label>
              <input type="checkbox" name="is_active" value="1" checked />
              ุชุตููู ูุดุท
            </label>
          </div>
          <div class="d-flex gap-10">
            <button type="submit" class="btn btn-primary">ุญูุธ ุงูุชุตููู</button>
            <button
              type="button"
              class="btn btn-danger"
              onclick="closeModal('categoryModal')"
            >
              ุฅูุบุงุก
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Notifications Tab -->
    <div id="notificationsTab" class="tab-content d-none">
      <div class="card">
        <div class="card-header">
          <h3 class="card-title">๐ ุฅุฏุงุฑุฉ ุงูุฅุดุนุงุฑุงุช</h3>
          <button class="btn btn-primary" onclick="showAddNotificationModal()">
            + ุฅูุดุงุก ุฅุดุนุงุฑ ุฌุฏูุฏ
          </button>
        </div>

        <!-- Filter Tabs -->
        <div
          style="
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            gap: 10px;
            align-items: center;
          "
        >
          <span style="font-weight: 600; color: #666; margin-left: 10px"
            >ุงูููุชุฑุฉ:</span
          >
          <button
            class="btn btn-sm btn-primary"
            id="filterAll"
            onclick="filterNotifications('all', this)"
            style="min-width: 100px"
          >
            ๐ ุงููู
          </button>
          <button
            class="btn btn-sm"
            id="filterSent"
            onclick="filterNotifications('sent', this)"
            style="min-width: 100px; background: #4caf50; color: white"
          >
            โ ุงููุฑุณูุฉ
          </button>
          <button
            class="btn btn-sm"
            id="filterScheduled"
            onclick="filterNotifications('scheduled', this)"
            style="min-width: 100px; background: #ff9800; color: white"
          >
            ๐ ุงููุฌุฏููุฉ
          </button>
        </div>

        <div id="notificationsTableContainer">
          <div class="loading">
            <div class="spinner"></div>
            <p>ุฌุงุฑู ุชุญููู ุงูุฅุดุนุงุฑุงุช...</p>
          </div>
        </div>
      </div>

      <!-- Statistics Card -->
      <div class="card" style="margin-top: 20px">
        <div class="card-header">
          <h3 class="card-title">๐ ุฅุญุตุงุฆูุงุช ุงูุฅุดุนุงุฑุงุช</h3>
        </div>
        <div id="notificationStats" style="padding: 20px">
          <p class="text-center">ุฌุงุฑู ุชุญููู ุงูุฅุญุตุงุฆูุงุช...</p>
        </div>
      </div>

      <!-- Info Card -->
      <div class="card" style="margin-top: 20px">
        <div class="card-header">
          <h3 class="card-title">โน๏ธ ููููุฉ ุงุณุชุฎุฏุงู ูุธุงู ุงูุฅุดุนุงุฑุงุช</h3>
        </div>
        <div style="padding: 20px">
          <div
            style="
              background: #f8f9fa;
              padding: 15px;
              border-radius: 8px;
              margin-bottom: 15px;
            "
          >
            <h4 style="color: #8b0000; margin-top: 0">โจ ุฃููุงุน ุงูุฅุดุนุงุฑุงุช</h4>
            <ul style="line-height: 2">
              <li><strong>ููุฑูุฉ:</strong> ูุชู ุฅุฑุณุงููุง ูุจุงุดุฑุฉ ุนูุฏ ุงูุฅูุดุงุก</li>
              <li><strong>ูุฌุฏููุฉ:</strong> ูุชู ุฅุฑุณุงููุง ูู ููุช ูุญุฏุฏ</li>
              <li>
                <strong>ูุชูุฑุฑุฉ:</strong> ูุชู ุฅุฑุณุงููุง ุจุดูู ูููู/ุฃุณุจูุนู/ุดูุฑู
              </li>
              <li>
                <strong>ุชููุงุฆูุฉ:</strong> ูุชู ุฅุฑุณุงููุง ุนูุฏ ุฅุถุงูุฉ ุชุฃูู ุฃู ุฅุนูุงู
                ุฌุฏูุฏ
              </li>
            </ul>
          </div>

          <div
            style="
              background: #fff3cd;
              padding: 15px;
              border-radius: 8px;
              border-left: 4px solid #ffc107;
            "
          >
            <h4 style="color: #856404; margin-top: 0">๐ ุงููุฆุงุช ุงููุณุชูุฏูุฉ</h4>
            <ul style="line-height: 2">
              <li><strong>ุงููู:</strong> ุฌููุน ุงููุณุชุฎุฏููู ุงููุดุทูู</li>
              <li><strong>ุงูุฃุนุถุงุก:</strong> ุงููุณุชุฎุฏููู ุจุฏูุฑ "ุนุถู"</li>
              <li><strong>ุงูุฎุฏุงู:</strong> ุงููุณุชุฎุฏููู ุจุฏูุฑ "ุฎุงุฏู"</li>
              <li><strong>ุงููุณุคูููู:</strong> ุงููุณุชุฎุฏููู ุจุฏูุฑ "ูุณุคูู"</li>
              <li><strong>ูุฎุตุต:</strong> ุงุฎุชูุงุฑ ูุณุชุฎุฏููู ูุญุฏุฏูู</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- Add/Edit Notification Modal -->
    <div id="notificationModal" class="modal">
      <div class="modal-content" style="max-width: 700px">
        <div class="modal-header">
          <h2 id="notificationModalTitle">ุฅูุดุงุก ุฅุดุนุงุฑ ุฌุฏูุฏ</h2>
          <span class="close-modal" onclick="closeModal('notificationModal')"
            >&times;</span
          >
        </div>
        <form id="notificationForm" onsubmit="saveNotification(event)">
          <div class="form-group">
            <label>ุงูุนููุงู *</label>
            <input
              type="text"
              class="form-control"
              name="title"
              required
              maxlength="200"
              placeholder="ุนููุงู ุงูุฅุดุนุงุฑ"
            />
          </div>

          <div class="form-group">
            <label>ุงููุญุชูู *</label>
            <textarea
              class="form-control"
              name="body"
              required
              rows="4"
              placeholder="ูุญุชูู ุงูุฅุดุนุงุฑ"
            ></textarea>
          </div>

          <div class="form-group">
            <label>ุงูููุน</label>
            <select class="form-control" name="type">
              <option value="custom">ูุฎุตุต</option>
              <option value="announcement">ุฅุนูุงู</option>
              <option value="reflection">ุชุฃูู</option>
              <option value="event">ูุนุงููุฉ</option>
              <option value="system">ูุธุงู</option>
            </select>
          </div>

          <div class="form-group">
            <label>ุงูุฃููููุฉ</label>
            <select class="form-control" name="priority">
              <option value="normal">ุนุงุฏู</option>
              <option value="high">ุนุงูู</option>
              <option value="low">ููุฎูุถ</option>
            </select>
          </div>

          <div class="form-group">
            <label>
              <input
                type="checkbox"
                name="send_immediately"
                value="1"
                checked
                onchange="toggleScheduleFields()"
              />
              ุฅุฑุณุงู ููุฑู
            </label>
          </div>

          <div id="scheduleFields" style="display: none">
            <div class="form-group">
              <label>ููุนุฏ ุงูุฅุฑุณุงู</label>
              <input
                type="datetime-local"
                class="form-control"
                name="scheduled_at"
              />
            </div>

            <div class="form-group">
              <label>ุงูุชูุฑุงุฑ</label>
              <select class="form-control" name="repeat_type">
                <option value="none">ุจุฏูู ุชูุฑุงุฑ</option>
                <option value="daily">ูููู</option>
                <option value="weekly">ุฃุณุจูุนู</option>
                <option value="monthly">ุดูุฑู</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label>ุงููุฆุฉ ุงููุณุชูุฏูุฉ</label>
            <select
              class="form-control"
              name="target_users"
              onchange="toggleSpecificUsers()"
            >
              <option value="all">ุงููู</option>
              <option value="members">ุงูุฃุนุถุงุก ููุท</option>
              <option value="servants">ุงูุฎุฏุงู ููุท</option>
              <option value="admins">ุงููุณุคูููู ููุท</option>
              <option value="specific">ูุณุชุฎุฏููู ูุญุฏุฏูู</option>
            </select>
          </div>

          <div id="specificUsersField" class="form-group" style="display: none">
            <label>ุงุฎุชุฑ ุงููุณุชุฎุฏููู</label>
            <select
              class="form-control"
              name="specific_user_ids"
              multiple
              size="5"
              id="specificUsersList"
            >
              <!-- ุณูุชู ููุคูุง ุฏููุงููููุงู -->
            </select>
            <small style="color: #666">ุงุถุบุท Ctrl ููุงุฎุชูุงุฑ ุงููุชุนุฏุฏ</small>
          </div>

          <div class="d-flex gap-10">
            <button type="submit" class="btn btn-primary">ุฅุฑุณุงู ุงูุฅุดุนุงุฑ</button>
            <button
              type="button"
              class="btn btn-danger"
              onclick="closeModal('notificationModal')"
            >
              ุฅูุบุงุก
            </button>
          </div>
        </form>
      </div>
    </div>

    <script src="js/admin.js?v=9.0"></script>
    <script>
      // ุชุญุฏูุซ ูุนุงููุฉ ุงูููู
      document
        .querySelector('[name="color"]')
        .addEventListener("change", function () {
          document.getElementById("colorHex").value = this.value;
          document.getElementById("colorPreview").style.color = this.value;
        });

      document
        .getElementById("colorHex")
        .addEventListener("input", function () {
          if (this.value.match(/^#[0-9A-Fa-f]{6}$/)) {
            document.querySelector('[name="color"]').value = this.value;
            document.getElementById("colorPreview").style.color = this.value;
          }
        });
    </script>
  </body>
</html>
